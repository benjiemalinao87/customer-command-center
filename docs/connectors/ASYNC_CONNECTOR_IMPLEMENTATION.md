# Async Connector Implementation Guide

## Problem Statement

When a connector (like Voice AI Outbound Call) runs inside a workflow, it **blocks** the entire sequence until it completes. This causes delays of 7+ seconds per contact, preventing SMS messages from being sent promptly.

```
CURRENT BEHAVIOR (Blocking):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                         â”‚
â”‚  Sequence Start                                                         â”‚
â”‚       â”‚                                                                 â”‚
â”‚       â–¼                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                        â”‚
â”‚  â”‚ Flow Triggerâ”‚ â”€â”€â–º Link Shortener Flow                                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                        â”‚
â”‚       â”‚                                                                 â”‚
â”‚       â–¼                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ TCPA Scrub  â”‚ â”€â”€â–º â”‚Link Shortenerâ”‚ â”€â”€â–º â”‚ Voice AI Connector  â”‚        â”‚
â”‚  â”‚   (fast)    â”‚     â”‚   (fast)    â”‚     â”‚   â³ BLOCKS 7sec    â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                 â”‚                       â”‚
â”‚                                                 â”‚ â³ WAITING...         â”‚
â”‚                                                 â”‚                       â”‚
â”‚                                                 â–¼                       â”‚
â”‚                                          Flow Complete                  â”‚
â”‚                                                 â”‚                       â”‚
â”‚                                                 â–¼                       â”‚
â”‚                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚                                          â”‚   SMS Send  â”‚  âŒ DELAYED!  â”‚
â”‚                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Solution: Async Flag for Connectors

Add a `runAsync` checkbox that lets connectors fire in the background without blocking.

```
NEW BEHAVIOR (Async/Fire-and-Forget):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                         â”‚
â”‚  Sequence Start                                                         â”‚
â”‚       â”‚                                                                 â”‚
â”‚       â–¼                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                        â”‚
â”‚  â”‚ Flow Triggerâ”‚ â”€â”€â–º Link Shortener Flow                                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                        â”‚
â”‚       â”‚                                                                 â”‚
â”‚       â–¼                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ TCPA Scrub  â”‚ â”€â”€â–º â”‚Link Shortenerâ”‚ â”€â”€â–º â”‚ Voice AI Connector  â”‚        â”‚
â”‚  â”‚   (fast)    â”‚     â”‚   (fast)    â”‚     â”‚  ğŸš€ FIRES ASYNC     â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                     â”‚                   â”‚
â”‚                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚                            â”‚                                 â”‚          â”‚
â”‚                            â–¼                                 â–¼          â”‚
â”‚                     Flow Complete               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                            â”‚                    â”‚  Background Task    â”‚ â”‚
â”‚                            â”‚                    â”‚  (Trigger.dev)      â”‚ â”‚
â”‚                            â–¼                    â”‚  - Makes API call   â”‚ â”‚
â”‚                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚  - Updates contact  â”‚ â”‚
â”‚                     â”‚   SMS Send  â”‚ âœ… INSTANT! â”‚  - Saves result     â”‚ â”‚
â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              FRONTEND                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ConnectorAction.js                                                   â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  Configuration State:                                          â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  {                                                             â”‚  â”‚  â”‚
â”‚  â”‚  â”‚    connectorId: "abc-123",                                     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚    fieldMappings: [...],                                       â”‚  â”‚  â”‚
â”‚  â”‚  â”‚    storeResult: true,                                          â”‚  â”‚  â”‚
â”‚  â”‚  â”‚    runAsync: true  â—„â”€â”€â”€â”€ NEW FLAG                              â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  }                                                             â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  UI:                                                                  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  [x] Store Result in Custom Field                              â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  [x] Run Asynchronously (Fire-and-Forget)  â—„â”€â”€â”€â”€ NEW CHECKBOX  â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â”‚ Saved to flow configuration
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              BACKEND                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  unifiedWorkflows.js (Trigger.dev)                                    â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  case 'connector':                                                    â”‚  â”‚
â”‚  â”‚    â”‚                                                                  â”‚  â”‚
â”‚  â”‚    â”œâ”€â”€ runAsync === false (DEFAULT)                                   â”‚  â”‚
â”‚  â”‚    â”‚   â”‚                                                              â”‚  â”‚
â”‚  â”‚    â”‚   â””â”€â”€ await executeConnectorStep(...)  // Blocks until done      â”‚  â”‚
â”‚  â”‚    â”‚                                                                  â”‚  â”‚
â”‚  â”‚    â””â”€â”€ runAsync === true (NEW)                                        â”‚  â”‚
â”‚  â”‚        â”‚                                                              â”‚  â”‚
â”‚  â”‚        â”œâ”€â”€ Create execution record (status: 'queued')                 â”‚  â”‚
â”‚  â”‚        â”œâ”€â”€ tasks.trigger('connector-execution', {...})  // Fire!      â”‚  â”‚
â”‚  â”‚        â””â”€â”€ Return immediately (don't wait)                            â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                    â”‚                                        â”‚
â”‚                                    â”‚ Fire-and-forget                        â”‚
â”‚                                    â–¼                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  connectorExecutionTask.js (Separate Trigger.dev Task)                â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  Runs independently in background:                                    â”‚  â”‚
â”‚  â”‚  1. Fetches connector config from database                            â”‚  â”‚
â”‚  â”‚  2. Updates status: 'queued' â†’ 'executing'                            â”‚  â”‚
â”‚  â”‚  3. Makes the API call (e.g., Voice AI)                               â”‚  â”‚
â”‚  â”‚  4. Updates status: 'executing' â†’ 'completed'                         â”‚  â”‚
â”‚  â”‚  5. Applies field mappings to contact                                 â”‚  â”‚
â”‚  â”‚  6. Has built-in retry logic (3 attempts)                             â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Files to Modify

### File 1: Frontend UI Component

**Path:** `frontend/src/components/flow-builder/actions/components/ConnectorAction.js`

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ConnectorAction.js - What to change                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  STEP 1: Add to configuration state (~line 58-63)               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”‚
â”‚  const [configuration, setConfiguration] = useState({           â”‚
â”‚    connectorId: config.connectorId || null,                     â”‚
â”‚    fieldMappings: config.fieldMappings || [],                   â”‚
â”‚    storeResult: config.storeResult !== false,                   â”‚
â”‚    runAsync: config.runAsync || false,  // â—„â”€â”€ ADD THIS         â”‚
â”‚    ...config                                                    â”‚
â”‚  });                                                            â”‚
â”‚                                                                 â”‚
â”‚  STEP 2: Add handler function (after handleStoreResultChange)   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  const handleAsyncChange = (checked) => {                       â”‚
â”‚    setConfiguration(prev => ({                                  â”‚
â”‚      ...prev,                                                   â”‚
â”‚      runAsync: checked                                          â”‚
â”‚    }));                                                         â”‚
â”‚    if (onChange) {                                              â”‚
â”‚      onChange({                                                 â”‚
â”‚        connectorId,                                             â”‚
â”‚        connectorName: selectedConnector?.name || 'Connector',   â”‚
â”‚        fieldMappings: configuration.fieldMappings,              â”‚
â”‚        storeResult: configuration.storeResult,                  â”‚
â”‚        runAsync: checked,  // â—„â”€â”€ INCLUDE THIS                  â”‚
â”‚      });                                                        â”‚
â”‚    }                                                            â”‚
â”‚  };                                                             â”‚
â”‚                                                                 â”‚
â”‚  STEP 3: Add checkbox UI (after storeResult checkbox ~line 367) â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  <FormControl>                                                  â”‚
â”‚    <Checkbox                                                    â”‚
â”‚      isChecked={configuration.runAsync}                         â”‚
â”‚      onChange={(e) => handleAsyncChange(e.target.checked)}      â”‚
â”‚      colorScheme="orange"                                       â”‚
â”‚    >                                                            â”‚
â”‚      <VStack align="start" spacing={0}>                         â”‚
â”‚        <Text fontSize="sm" fontWeight="medium">                 â”‚
â”‚          Run Asynchronously (Fire-and-Forget)                   â”‚
â”‚        </Text>                                                  â”‚
â”‚        <Text fontSize="xs" color={subtextColor}>                â”‚
â”‚          Execute in background without blocking workflow.       â”‚
â”‚        </Text>                                                  â”‚
â”‚      </VStack>                                                  â”‚
â”‚    </Checkbox>                                                  â”‚
â”‚  </FormControl>                                                 â”‚
â”‚                                                                 â”‚
â”‚  STEP 4: Include runAsync in all onChange callbacks             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  Update these functions to include runAsync:                    â”‚
â”‚  - handleFieldMappingChange (line ~187)                         â”‚
â”‚  - handleStoreResultChange (line ~204)                          â”‚
â”‚  - useEffect that notifies parent (line ~215)                   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### File 2: Backend Workflow Execution

**Path:** `trigger/unifiedWorkflows.js`

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  unifiedWorkflows.js - What to change (~line 2359-2495)         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Find: case 'connector':                                        â”‚
â”‚                                                                 â”‚
â”‚  STEP 1: Read the runAsync flag                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”‚
â”‚  case 'connector':                                              â”‚
â”‚    const connectorId = action.configuration?.connectorId;       â”‚
â”‚    const runAsync = action.configuration?.runAsync === true;    â”‚
â”‚    //              â–²                                            â”‚
â”‚    //              â””â”€â”€ ADD THIS LINE                            â”‚
â”‚                                                                 â”‚
â”‚  STEP 2: Add conditional branch for async mode                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                 â”‚
â”‚  // After connector validation, before execution:               â”‚
â”‚                                                                 â”‚
â”‚  if (runAsync) {                                                â”‚
â”‚    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚    // ASYNC MODE: Fire-and-forget                               â”‚
â”‚    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                 â”‚
â”‚    logger.log(`ğŸš€ Running connector async: ${connector.name}`); â”‚
â”‚                                                                 â”‚
â”‚    // Create execution record with 'queued' status              â”‚
â”‚    const { data: executionRecord } = await supabaseAdmin        â”‚
â”‚      .from('connector_executions')                              â”‚
â”‚      .insert({                                                  â”‚
â”‚        connector_id: connectorId,                               â”‚
â”‚        workspace_id: workspaceId,                               â”‚
â”‚        contact_id: contactId,                                   â”‚
â”‚        flow_run_id: executionId,                                â”‚
â”‚        status: 'queued',  // â—„â”€â”€ Not 'executing'                â”‚
â”‚        input_data: inputData,                                   â”‚
â”‚        created_at: new Date().toISOString()                     â”‚
â”‚      })                                                         â”‚
â”‚      .select()                                                  â”‚
â”‚      .single();                                                 â”‚
â”‚                                                                 â”‚
â”‚    // Fire-and-forget: trigger without waiting                  â”‚
â”‚    await tasks.trigger('connector-execution', {                 â”‚
â”‚      executionId: executionRecord.id,                           â”‚
â”‚      connectorId,                                               â”‚
â”‚      workspaceId,                                               â”‚
â”‚      contactId,                                                 â”‚
â”‚      inputData,                                                 â”‚
â”‚      flowRunId: executionId                                     â”‚
â”‚    });                                                          â”‚
â”‚                                                                 â”‚
â”‚    actionResult = {                                             â”‚
â”‚      success: true,                                             â”‚
â”‚      executionId: executionRecord.id,                           â”‚
â”‚      status: 'queued',                                          â”‚
â”‚      runAsync: true,                                            â”‚
â”‚      message: `Connector queued for async execution`            â”‚
â”‚    };                                                           â”‚
â”‚                                                                 â”‚
â”‚  } else {                                                       â”‚
â”‚    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚    // SYNC MODE: Existing behavior (unchanged)                  â”‚
â”‚    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                 â”‚
â”‚    // ... keep all existing synchronous code here ...           â”‚
â”‚  }                                                              â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### File 3: No Changes Needed!

**Path:** `trigger/connectorExecutionTask.js`

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  connectorExecutionTask.js - Already handles async!             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  This task already does everything we need:                     â”‚
â”‚                                                                 â”‚
â”‚  âœ… Fetches connector config from database                      â”‚
â”‚  âœ… Updates execution status: queued â†’ executing â†’ completed    â”‚
â”‚  âœ… Makes the actual API call                                   â”‚
â”‚  âœ… Applies field mappings to contact                           â”‚
â”‚  âœ… Has retry logic (3 attempts with exponential backoff)       â”‚
â”‚  âœ… Handles errors and updates status to 'failed'               â”‚
â”‚                                                                 â”‚
â”‚  NO CHANGES REQUIRED!                                           â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow Comparison

### Synchronous Mode (Default)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Workflow   â”‚     â”‚  Connector   â”‚     â”‚  External    â”‚     â”‚   Contact    â”‚
â”‚   Engine     â”‚     â”‚   Step       â”‚     â”‚    API       â”‚     â”‚   Database   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                    â”‚                    â”‚                    â”‚
       â”‚  Execute Step      â”‚                    â”‚                    â”‚
       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                    â”‚                    â”‚
       â”‚                    â”‚                    â”‚                    â”‚
       â”‚                    â”‚  HTTP Request      â”‚                    â”‚
       â”‚                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                    â”‚
       â”‚                    â”‚                    â”‚                    â”‚
       â”‚     â³ WAITING     â”‚     â³ WAITING     â”‚                    â”‚
       â”‚     â³ WAITING     â”‚     â³ WAITING     â”‚  Processing...     â”‚
       â”‚     â³ WAITING     â”‚     â³ WAITING     â”‚                    â”‚
       â”‚                    â”‚                    â”‚                    â”‚
       â”‚                    â”‚  HTTP Response     â”‚                    â”‚
       â”‚                    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                    â”‚
       â”‚                    â”‚                    â”‚                    â”‚
       â”‚                    â”‚  Update Fields     â”‚                    â”‚
       â”‚                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
       â”‚                    â”‚                    â”‚                    â”‚
       â”‚  Step Complete     â”‚                    â”‚                    â”‚
       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                    â”‚                    â”‚
       â”‚                    â”‚                    â”‚                    â”‚
       â”‚  Continue to       â”‚                    â”‚                    â”‚
       â”‚  next step...      â”‚                    â”‚                    â”‚
       â–¼                    â”‚                    â”‚                    â”‚
```

### Asynchronous Mode (New)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Workflow   â”‚     â”‚  Background  â”‚     â”‚  External    â”‚     â”‚   Contact    â”‚
â”‚   Engine     â”‚     â”‚    Task      â”‚     â”‚    API       â”‚     â”‚   Database   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                    â”‚                    â”‚                    â”‚
       â”‚  Fire Task         â”‚                    â”‚                    â”‚
       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                    â”‚                    â”‚
       â”‚                    â”‚                    â”‚                    â”‚
       â”‚  Return Immediatelyâ”‚                    â”‚                    â”‚
       â”‚â—„ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”‚                    â”‚                    â”‚
       â”‚                    â”‚                    â”‚                    â”‚
       â”‚  Continue to       â”‚  HTTP Request      â”‚                    â”‚
       â”‚  next step! âœ…     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                    â”‚
       â”‚                    â”‚                    â”‚                    â”‚
       â–¼                    â”‚                    â”‚  Processing...     â”‚
                            â”‚                    â”‚                    â”‚
   (SMS sends              â”‚  HTTP Response     â”‚                    â”‚
    immediately!)          â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                    â”‚
                            â”‚                    â”‚                    â”‚
                            â”‚  Update Fields     â”‚                    â”‚
                            â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
                            â”‚                    â”‚                    â”‚
                            â”‚  Task Complete     â”‚                    â”‚
                            â–¼                    â”‚                    â”‚
```

---

## Database Schema (No Changes Needed)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Table: connector_executions                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Column             â”‚ Type      â”‚ Description                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  id                 â”‚ uuid      â”‚ Primary key                   â”‚
â”‚  connector_id       â”‚ uuid      â”‚ FK to connectors table        â”‚
â”‚  workspace_id       â”‚ uuid      â”‚ FK to workspaces table        â”‚
â”‚  contact_id         â”‚ uuid      â”‚ FK to contacts table          â”‚
â”‚  flow_run_id        â”‚ uuid      â”‚ FK to flow execution          â”‚
â”‚  status             â”‚ text      â”‚ 'queued'|'executing'|         â”‚
â”‚                     â”‚           â”‚ 'completed'|'failed'          â”‚
â”‚  input_data         â”‚ jsonb     â”‚ Input sent to connector       â”‚
â”‚  output_data        â”‚ jsonb     â”‚ Response from connector       â”‚
â”‚  error_message      â”‚ text      â”‚ Error details if failed       â”‚
â”‚  execution_time_ms  â”‚ integer   â”‚ How long it took              â”‚
â”‚  started_at         â”‚ timestamp â”‚ When execution started        â”‚
â”‚  completed_at       â”‚ timestamp â”‚ When execution finished       â”‚
â”‚  created_at         â”‚ timestamp â”‚ When record was created       â”‚
â”‚                                                                 â”‚
â”‚  Status Flow:                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚ queued  â”‚â”€â”€â”€â–ºâ”‚ executing â”‚â”€â”€â”€â–ºâ”‚ completed â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                       â”‚                â”‚                        â”‚
â”‚                       â”‚                â”‚                        â”‚
â”‚                       â–¼                â”‚                        â”‚
â”‚                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚                        â”‚
â”‚                 â”‚  failed  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ (on error)             â”‚
â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Testing Checklist

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Testing Checklist                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  [ ] Sync mode (default) still works                            â”‚
â”‚      - Create flow with connector, leave async unchecked        â”‚
â”‚      - Run flow, verify it waits for connector to complete      â”‚
â”‚      - Verify field mappings are applied                        â”‚
â”‚                                                                 â”‚
â”‚  [ ] Async mode works                                           â”‚
â”‚      - Create flow with connector, check async checkbox         â”‚
â”‚      - Run flow, verify it returns immediately                  â”‚
â”‚      - Check connector_executions table for 'queued' status     â”‚
â”‚      - Wait a moment, verify status changes to 'completed'      â”‚
â”‚      - Verify field mappings are applied after completion       â”‚
â”‚                                                                 â”‚
â”‚  [ ] UI saves configuration correctly                           â”‚
â”‚      - Toggle async checkbox                                    â”‚
â”‚      - Save flow                                                â”‚
â”‚      - Reload page                                              â”‚
â”‚      - Verify checkbox state persisted                          â”‚
â”‚                                                                 â”‚
â”‚  [ ] Error handling                                             â”‚
â”‚      - Test with invalid connector                              â”‚
â”‚      - Verify async mode still creates queued record            â”‚
â”‚      - Verify background task handles error gracefully          â”‚
â”‚                                                                 â”‚
â”‚  [ ] Real-world test (Voice AI)                                 â”‚
â”‚      - Edit Link Shortener flow                                 â”‚
â”‚      - Enable async on Voice AI connector                       â”‚
â”‚      - Enroll contact in STL and In Area sequence               â”‚
â”‚      - Verify SMS sends immediately (not delayed by 7 sec)      â”‚
â”‚      - Verify Voice AI call still happens in background         â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Quick Reference

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TL;DR - Quick Summary                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  WHAT:  Add "Run Asynchronously" checkbox to connectors         â”‚
â”‚                                                                 â”‚
â”‚  WHY:   Voice AI connector blocks workflow for 7+ seconds       â”‚
â”‚                                                                 â”‚
â”‚  HOW:   - Frontend: Add checkbox + handler + state              â”‚
â”‚         - Backend: if runAsync, use tasks.trigger() instead     â”‚
â”‚                    of await executeConnectorStep()              â”‚
â”‚                                                                 â”‚
â”‚  FILES: 1. ConnectorAction.js (UI)                              â”‚
â”‚         2. unifiedWorkflows.js (execution logic)                â”‚
â”‚                                                                 â”‚
â”‚  RESULT: SMS sends immediately, Voice AI runs in background     â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Questions?

If you have questions about this implementation, check:
1. The existing `connectorExecutionTask.js` for how background tasks work
2. The `tasks.trigger()` vs `tasks.triggerAndWait()` pattern in `unifiedWorkflows.js`
3. Trigger.dev documentation for task execution patterns
